<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>JNK Express Padala - Track Your Package</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Track your JNK Express Padala packages easily. Enter your tracking number to see live updates, estimated delivery, and status timeline." />
  <meta name="keywords" content="JNK Express Padala, Track Package, Courier, Shipping, Lubang" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <style>
    /* ===== Global Reset & Font ===== */
    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: linear-gradient(135deg, #fdfbfb, #ebedee);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    /* ===== Header (sticky top) ===== */
    header {
      position: sticky;
      top: 0;
      z-index: 1100;
      background: linear-gradient(135deg, #D7282F, #a01c23);
      color: #fff;
      padding: 15px 25px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.25);
      backdrop-filter: blur(6px);
    }
    header img {
      height: 50px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
      transition: transform 0.3s ease;
    }
    header img:hover { transform: scale(1.05); }
    header h1 {
      margin: 0;
      font-size: 1.6em;
      letter-spacing: 1px;
      flex: 1;
    }
    .admin-link {
      color: white;
      text-decoration: none;
      background: rgba(255,255,255,0.15);
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 0.95em;
      transition: all 0.3s ease;
    }
    .admin-link:hover {
      background: #fff;
      color: #D7282F;
    }

    /* ===== Navigation ===== */
    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background: #fff;
      padding: 12px;
      border-bottom: 1px solid #ddd;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    nav button {
      margin: 8px 12px;
      padding: 12px 18px;
      border: 2px solid #D7282F;
      background: white;
      color: #D7282F;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.35s ease;
    }
    nav button:hover {
      background: #D7282F;
      color: #fff;
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    /* ===== Container ===== */
    .container {
      max-width: 650px;
      margin: 30px auto;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 2.5em;
      text-align: center;
    }
    .container h2 {
      margin-bottom: 1em;
      font-weight: 600;
      color: #D7282F;
    }
    input, button.track-btn {
      padding: 14px;
      font-size: 1em;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      transition: all 0.3s ease;
    }
    .tracking-bar {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }
    .track-btn {
      background-color: #D7282F;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .track-btn:hover {
      background: #a01c23;
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* ===== Status Box & Progress ===== */
    .status-box {
      margin-top: 20px;
      padding: 20px;
      background: #fff6f6;
      border-radius: 12px;
      text-align: left;
      display: none;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
    }
    .progress-bar {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      font-size: 0.95em;
    }
    .progress-step {
      flex: 1;
      text-align: center;
      position: relative;
    }
    .progress-step::before {
      content: "";
      display: block;
      height: 10px;
      background: #ccc;
      margin: 0 auto 8px;
      border-radius: 6px;
      width: 80%;
      transition: background 0.4s ease;
    }
    .progress-step.active::before {
      background: #D7282F;
      box-shadow: 0 0 12px rgba(215,40,47,0.6);
    }

    .map-box {
      margin-top: 20px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 18px rgba(0,0,0,0.15);
    }

    #loading {
      display: none;
      margin-top: 10px;
      color: #D7282F;
      font-weight: 600;
    }

    /* ===== Floating Buttons ===== */
    .support-btn,
    #backToTop {
      position: fixed;
      right: 20px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 15px rgba(0,0,0,0.25);
      z-index: 1200;
    }

    .support-btn {
      bottom: 90px;
      background: linear-gradient(135deg, #D7282F, #a01c23);
      color: white;
      padding: 14px 20px;
    }
    .support-btn:hover { transform: scale(1.08); }

    #backToTop {
      bottom: 20px;
      background: linear-gradient(135deg, #D7282F, #a01c23);
      color: white;
      border: none;
      padding: 14px 20px;
      display: none;
    }
    #backToTop:hover { transform: scale(1.12); }

    /* ===== Footer ===== */
    footer {
      background: #D7282F;
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 0.95em;
      margin-top: 50px;
      box-shadow: 0 -6px 12px rgba(0,0,0,0.2);
    }
    footer a {
      color: white;
      text-decoration: underline;
    }
  </style>
</head>
<body>

<header>
  <img src="logo.jpg" alt="Logo" />
  <h1>JNK Express Padala</h1>
  <a href="admin.html" class="admin-link">Login</a>
</header>

<nav>
  <button onclick="document.getElementById('trackingInput').focus()">Track & Trace</button>
  <button onclick="alert('Shipping Rates - Coming Soon!')">Shipping Rates</button>
  <button onclick="alert('Shipping Days - Coming Soon!')">Shipping Days</button>
  <button onclick="alert('Find Branches - Coming Soon!')">Find Branches</button>
</nav>

<div class="container">
  <h2>Track Your Package</h2>
  <div class="tracking-bar">
    <input type="text" id="trackingInput" placeholder="Enter your tracking number" />
    <button class="track-btn" onclick="trackPackage()">Track</button>
  </div>
  <div id="loading">‚è≥ Loading...</div>
  <div id="statusResult" class="status-box"></div>
  <div id="mapContainer" class="map-box"></div>
</div>

<div class="services-section">
  <h3>Our Services</h3>
  <p><strong>Package Courier:</strong> Fast delivery from Urban to Lubang and Vice-versa!</p>
  <p><strong>Sea Freight:</strong> Best rates, starting at just ‚Ç±20!</p>
  <p><strong>Bulk/Truck Services:</strong> Large shipments- Balikbayan boxes, appliances, handled with care.</p>
</div>

<div class="news-section">
  <h4>üìç Pick-up Locations</h4>
  <ul>
    <li><strong>Main Branch:</strong> Urban Finds by JNK. Andres Bonifacio HW, Brgy. Araw at Bituin, Poblacion East (Near Rural Health Unit)</li>
    <li><strong>Tilik:</strong> E. Arnaldo St. (Near NFA's Warehouse and TILIK Elementary School)</li>
    <li><strong>Vigo/Dangay:</strong> (Near Dangay Church)</li>
    <li><strong>Tagbac:</strong> 104 Guijo St., Extension (West)</li>
    <li><strong>Binacas:</strong> 213 Kasoy St. (In front of plaza)</li>
    <li><strong>Cabra:</strong> 037 Bayabas St., Libis</li>
  </ul>
</div>

<div class="info-section" id="policies">
  <button class="collapsible">About Us</button>
  <div class="content">
    <p>JNK Express Padala is dedicated to safe, quick, and reliable delivery...</p>
  </div>

  <button class="collapsible">Privacy Policy</button>
  <div class="content">
    <p>We respect your privacy and ensure your personal information is protected...</p>
  </div>

  <button class="collapsible">Cookie Policy</button>
  <div class="content">
    <p>Our website may use cookies to enhance your experience...</p>
  </div>
</div>

<!-- Back to Top Button -->
<button id="backToTop" onclick="scrollToTop()">‚Üë Top</button>

<!-- Floating Support Button -->
<div class="support-btn" onclick="toggleSupportForm()">üí¨ Support</div>

<!-- Support Form -->
<div class="support-form" id="supportForm">
  <form action="https://formsubmit.co/jhonyhix@gmail.com" method="POST">
    <input type="hidden" name="_captcha" value="false">
    <input type="text" name="Name" placeholder="Your Name" required />
    <input type="text" name="Tracking Number" placeholder="Tracking Number" required />
    <textarea name="Message" rows="3" placeholder="Your message" required></textarea>
    <button type="submit">Send Message</button>
  </form>
</div>

<footer>
  &copy; 2021 JNK Express Padala. All Rights Reserved.<br>
  <a href="https://www.facebook.com/profile.php?id=61572021585621">Facebook</a>
</footer>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAnrNfuTSRAKUS2tAU4AUUrauw_QzszCjY",
  authDomain: "jnk-ordertracker.firebaseapp.com",
  projectId: "jnk-ordertracker",
  storageBucket: "jnk-ordertracker.appspot.com",
  messagingSenderId: "421193030070",
  appId: "1:421193030070:web:078e39980237bc41f64917"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const STAGES = ["Package Received", "In Transit", "Arrived", "For Pick-up"];

async function trackPackage() {
  const input = document.getElementById('trackingInput').value.trim().toUpperCase();
  const resultDiv = document.getElementById('statusResult');
  const mapDiv = document.getElementById('mapContainer');
  const loadingDiv = document.getElementById('loading');

  loadingDiv.style.display = 'block';
  resultDiv.style.display = 'none';
  mapDiv.innerHTML = '';

  try {
    const doc = await db.collection("tracking").doc(input).get();
    if (doc.exists) {
      const data = doc.data();
      const location = data.location || "Unknown";
      const estimated = data.estimatedDate || "Not available";
      const history = data.statusHistory || [];

      let progress = STAGES.map(stage =>
        `<div class='progress-step ${history.some(h => h.status === stage) ? 'active' : ''}'>${stage}</div>`
      ).join("");

      let timeline = history.map(h => {
        const time = h.timestamp?.toDate().toLocaleString() || "";
        return `‚Ä¢ [${time}] ${h.status}`;
      }).join("<br>");

      resultDiv.innerHTML = `
        <strong>Location:</strong> ${location}<br>
        <strong>Estimated Delivery:</strong> ${estimated}<br><br>
        <strong>Status Progress:</strong>
        <div class='progress-bar'>${progress}</div><br>
        <strong>Status Timeline:</strong><br>${timeline}`;

      if (location && location !== "Unknown") {
        const encodedLocation = encodeURIComponent(location);
        mapDiv.innerHTML = `
          <iframe width="100%" height="250" frameborder="0" style="border:0"
            referrerpolicy="no-referrer-when-downgrade" allowfullscreen
            src="https://www.google.com/maps/embed/v1/place?q=${encodedLocation}&key=AIzaSyBuYjjEn24Bb8KlcGowU4IarGUsijsCP6c">
          </iframe>`;
      }
    } else {
      resultDiv.innerHTML = "‚ùå <strong>Tracking number not found.</strong>";
    }
  } catch (error) {
    resultDiv.innerHTML = "Please enter your tracking number.";
    console.error(error);
  }

  loadingDiv.style.display = 'none';
  resultDiv.style.display = 'block';
}

function toggleSupportForm() {
  const form = document.getElementById('supportForm');
  form.style.display = form.style.display === 'block' ? 'none' : 'block';
}

// Collapsible sections
const coll = document.getElementsByClassName("collapsible");
for (let i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    const content = this.nextElementSibling;
    content.style.display = content.style.display === "block" ? "none" : "block";
  });
}

// Back to top
window.onscroll = function() {
  const btn = document.getElementById("backToTop");
  btn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "block" : "none";
};
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>

</body>
</html>
