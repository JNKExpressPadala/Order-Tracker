<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>JNK Express Padala - Track Your Package</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Track your JNK Express Padala packages easily. Enter your tracking number to see live updates, estimated delivery, and status timeline." />
  <meta name="keywords" content="JNK Express Padala, Track Package, Courier, Shipping, Lubang" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <style>
    /* ===== Global Reset & Font ===== */
    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: linear-gradient(135deg, #fdfbfb, #ebedee);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      perspective: 1000px; /* enables 3D transforms */
    }

    /* ===== Header ===== */
    header {
      background: linear-gradient(135deg, #D7282F, #a01c23);
      color: #fff;
      padding: 15px 25px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      transform-style: preserve-3d;
    }
    header img {
      height: 55px;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.4);
      transform: rotateY(-10deg);
      transition: transform 0.4s ease;
    }
    header img:hover {
      transform: rotateY(0deg) scale(1.05);
    }
    header h1 {
      margin: 0;
      font-size: 1.8em;
      letter-spacing: 1px;
      transform: translateZ(20px);
    }
    .admin-link {
      color: white;
      text-decoration: none;
      background: rgba(255,255,255,0.15);
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 0.95em;
      transition: all 0.3s ease;
    }
    .admin-link:hover {
      background: #fff;
      color: #D7282F;
      transform: translateY(-3px);
    }

    /* ===== Navigation ===== */
    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background: #fff;
      padding: 12px;
      border-bottom: 1px solid #ddd;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    nav button {
      margin: 8px 12px;
      padding: 12px 18px;
      border: 2px solid #D7282F;
      background: white;
      color: #D7282F;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.35s ease;
      transform: perspective(600px) translateZ(0);
    }
    nav button:hover {
      background: #D7282F;
      color: #fff;
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    /* ===== Container ===== */
    .container {
      max-width: 650px;
      margin: 30px auto;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 2.5em;
      text-align: center;
      backdrop-filter: blur(12px);
      transform: translateY(20px);
      animation: fadeInUp 1s ease forwards;
    }
    .container h2 {
      margin-bottom: 1em;
      font-weight: 600;
      color: #D7282F;
    }
    input, button.track-btn {
      padding: 14px;
      font-size: 1em;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      transition: all 0.3s ease;
    }
    .tracking-bar {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }
    .tracking-bar input {
      flex: 1;
    }
    .track-btn {
      background-color: #D7282F;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .track-btn:hover {
      background: #a01c23;
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* ===== Status Box & Progress ===== */
    .status-box {
      margin-top: 20px;
      padding: 20px;
      background: #fff6f6;
      border-radius: 12px;
      text-align: left;
      display: none;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
    }
    .progress-bar {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      font-size: 0.95em;
    }
    .progress-step {
      flex: 1;
      text-align: center;
      position: relative;
    }
    .progress-step::before {
      content: "";
      display: block;
      height: 10px;
      background: #ccc;
      margin: 0 auto 8px;
      border-radius: 6px;
      width: 80%;
      transition: background 0.4s ease;
    }
    .progress-step.active::before {
      background: #D7282F;
      box-shadow: 0 0 12px rgba(215,40,47,0.6);
    }

    .map-box {
      margin-top: 20px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 18px rgba(0,0,0,0.15);
    }

    #loading {
      display: none;
      margin-top: 10px;
      color: #D7282F;
      font-weight: 600;
    }

    /* ===== Floating Support Button ===== */
    .support-btn {
      position: fixed;
      bottom: 90px;
      right: 20px;
      background: linear-gradient(135deg, #D7282F, #a01c23);
      color: white;
      padding: 14px 20px;
      border-radius: 30px;
      font-weight: bold;
      box-shadow: 0 6px 15px rgba(0,0,0,0.25);
      z-index: 1000;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .support-btn:hover {
      transform: translateY(-4px) scale(1.05);
    }

    .support-form {
      position: fixed;
      bottom: 150px;
      right: 20px;
      width: 320px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.25);
      padding: 1.2em;
      display: none;
      z-index: 1001;
      animation: fadeInUp 0.6s ease forwards;
    }
    .support-form input, .support-form textarea {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-size: 1em;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .support-form button {
      background: #D7282F;
      color: white;
      border: none;
      margin-top: 12px;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .support-form button:hover {
      background: #a01c23;
      transform: scale(1.05);
    }

    /* ===== Info & Sections ===== */
    .info-section, .services-section, .news-section {
      max-width: 650px;
      margin: 30px auto;
      padding: 20px 25px;
      background: rgba(255,255,255,0.85);
      border-radius: 16px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.08);
      animation: fadeInUp 1s ease forwards;
    }
    .info-section h4, .services-section h3, .news-section h4 {
      color: #D7282F;
      margin-bottom: 12px;
    }

    /* ===== Collapsibles ===== */
    .collapsible {
      width: 100%;
      background: #D7282F;
      color: white;
      padding: 14px;
      border: none;
      border-radius: 8px;
      margin-top: 12px;
      text-align: left;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .collapsible:hover {
      background: #a01c23;
    }
    .collapsible:after {
      content: '\002B';
      float: right;
    }
    .collapsible.active:after {
      content: '\2212';
    }
    .content {
      padding: 12px 18px;
      display: none;
      border-left: 3px solid #D7282F;
      background: #fffdfd;
      border-radius: 0 0 8px 8px;
    }

    /* ===== Back to Top ===== */
    #backToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1002;
      background: linear-gradient(135deg, #D7282F, #a01c23);
      color: white;
      border: none;
      padding: 14px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 6px 15px rgba(0,0,0,0.25);
      display: none;
      transition: transform 0.3s ease;
    }
    #backToTop:hover {
      transform: scale(1.1);
    }

    /* ===== Footer ===== */
    footer {
      background: #D7282F;
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 0.95em;
      margin-top: 50px;
      box-shadow: 0 -6px 12px rgba(0,0,0,0.2);
    }
    footer a {
      color: white;
      text-decoration: underline;
    }

    /* ===== Animations ===== */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<header>
  <img src="logo.jpg" alt="Logo" />
  <h1>JNK Express Padala</h1>
  <a href="admin.html" class="admin-link">Login</a>
</header>

<nav>
  <button onclick="document.getElementById('trackingInput').focus()">Track & Trace</button>
  <button onclick="alert('Shipping Rates - Coming Soon!')">Shipping Rates</button>
  <button onclick="alert('Shipping Days - Coming Soon!')">Shipping Days</button>
  <button onclick="alert('Find Branches - Coming Soon!')">Find Branches</button>
</nav>

<div class="container">
  <h2>Track Your Package</h2>
  <div class="tracking-bar">
    <input type="text" id="trackingInput" placeholder="Enter your tracking number" />
    <button class="track-btn" onclick="trackPackage()">Track</button>
  </div>
  <div id="loading">‚è≥ Loading...</div>
  <div id="statusResult" class="status-box"></div>
  <div id="mapContainer" class="map-box"></div>
</div>

<div class="services-section">
  <h3>Our Services</h3>
  <p><strong>Package Courier:</strong> Fast delivery from Urban to Lubang and Vice-versa!</p>
  <p><strong>Sea Freight:</strong> Best rates, starting at just ‚Ç±20!</p>
  <p><strong>Bulk/Truck Services:</strong> Large shipments- Balikbayan boxes, appliances, handled with care.</p>
</div>

<div class="news-section">
  <h4>üìç Pick-up Locations</h4>
  <ul>
    <li><strong>Main Branch:</strong> Urban Finds by JNK. Andres Bonifacio HW, Brgy. Araw at Bituin, Poblacion East (Near Rural Health Unit)</li>
    <li><strong>Tilik:</strong> E. Arnaldo St. (Near NFA's Warehouse and TILIK Elementary School)</li>
    <li><strong>Vigo/Dangay:</strong> (Near Dangay Church)</li>
    <li><strong>Tagbac:</strong> 104 Guijo St., Extension (West)</li>
    <li><strong>Binacas:</strong> 213 Kasoy St. (In front of plaza)</li>
    <li><strong>Cabra:</strong> 037 Bayabas St., Libis</li>
  </ul>
</div>

<div class="info-section" id="policies">
  <button class="collapsible">About Us</button>
  <div class="content">
    <p>JNK Express Padala is dedicated to safe, quick, and reliable delivery from Urban to Lubang and beyond. We strive to provide excellent service to our customers while ensuring timely parcel tracking and secure handling of shipments.</p>
  </div>

  <button class="collapsible">Privacy Policy</button>
  <div class="content">
    <p>We respect your privacy and ensure your personal information is protected. Data such as your name, email, phone number, and tracking information is collected solely to provide our delivery services. We do not sell or share personal information to third parties without your consent.</p>
  </div>

  <button class="collapsible">Cookie Policy</button>
  <div class="content">
    <p>Our website may use cookies to enhance your experience. Cookies help us remember preferences, improve site functionality, and analyze visitor activity. You can disable cookies in your browser settings, but some features may not function properly.</p>
  </div>
</div>

<!-- Back to Top Button -->
<button id="backToTop" onclick="scrollToTop()">‚Üë Top</button>

<div class="info-section">
  <button class="collapsible">Terms & Conditions</button>
  <div class="content">
    <p>By using JNK Express Padala services, you agree to provide accurate information for shipment and tracking. JNK Express Padala is not liable for delays caused by unforeseen events such as natural disasters, traffic conditions, or incorrect recipient details. All parcels are handled according to the declared content and value.</p>
  </div>

  <button class="collapsible">Refund & Shipping Policy</button>
  <div class="content">
    <p>Shipping fees are non-refundable once the parcel is dispatched. Refunds or claims for lost or damaged items will be assessed on a case-by-case basis. Customers are encouraged to ensure proper packaging and accurate delivery information to avoid complications.</p>
  </div>
</div>

<!-- Floating Support Button -->
<div class="support-btn" onclick="toggleSupportForm()">üí¨ Support</div>

<!-- Support Form -->
<div class="support-form" id="supportForm">
  <form action="https://formsubmit.co/jhonyhix@gmail.com" method="POST">
    <input type="hidden" name="_captcha" value="false">
    <input type="text" name="Name" placeholder="Your Name" required />
    <input type="text" name="Tracking Number" placeholder="Tracking Number" required />
    <textarea name="Message" rows="3" placeholder="Your message" required></textarea>
    <button type="submit">Send Message</button>
  </form>
</div>

<footer>
  &copy; 2021 JNK Express Padala. All Rights Reserved.<br>
  <a href="https://www.facebook.com/profile.php?id=61572021585621">Facebook</a>
</footer>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAnrNfuTSRAKUS2tAU4AUUrauw_QzszCjY",
  authDomain: "jnk-ordertracker.firebaseapp.com",
  projectId: "jnk-ordertracker",
  storageBucket: "jnk-ordertracker.appspot.com",
  messagingSenderId: "421193030070",
  appId: "1:421193030070:web:078e39980237bc41f64917"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const STAGES = ["Package Received", "In Transit", "Arrived", "For Pick-up"];

async function trackPackage() {
  const input = document.getElementById('trackingInput').value.trim().toUpperCase();
  const resultDiv = document.getElementById('statusResult');
  const mapDiv = document.getElementById('mapContainer');
  const loadingDiv = document.getElementById('loading');

  loadingDiv.style.display = 'block';
  resultDiv.style.display = 'none';
  mapDiv.innerHTML = '';

  try {
    const doc = await db.collection("tracking").doc(input).get();
    if (doc.exists) {
      const data = doc.data();
      const location = data.location || "Unknown";
      const estimated = data.estimatedDate || "Not available";
      const history = data.statusHistory || [];

      let progress = STAGES.map(stage =>
        `<div class='progress-step ${history.some(h => h.status === stage) ? 'active' : ''}'>${stage}</div>`
      ).join("");

      let timeline = history.map(h => {
        const time = h.timestamp?.toDate().toLocaleString() || "";
        return `‚Ä¢ [${time}] ${h.status}`;
      }).join("<br>");

      resultDiv.innerHTML = `
        <strong>Location:</strong> ${location}<br>
        <strong>Estimated Delivery:</strong> ${estimated}<br><br>
        <strong>Status Progress:</strong>
        <div class='progress-bar'>${progress}</div><br>
        <strong>Status Timeline:</strong><br>${timeline}`;

      if (location && location !== "Unknown") {
        const encodedLocation = encodeURIComponent(location);
        mapDiv.innerHTML = `
          <iframe width="100%" height="250" frameborder="0" style="border:0"
            referrerpolicy="no-referrer-when-downgrade" allowfullscreen
            src="https://www.google.com/maps/embed/v1/place?q=${encodedLocation}&key=AIzaSyBuYjjEn24Bb8KlcGowU4IarGUsijsCP6c">
          </iframe>`;
      }
    } else {
      resultDiv.innerHTML = "‚ùå <strong>Tracking number not found.</strong><br>Please double-check your tracking number or <a href='#' onclick='toggleSupportForm()'>contact support</a>.";
    }
  } catch (error) {
    resultDiv.innerHTML = "Please enter your tracking number.";
    console.error(error);
  }

  loadingDiv.style.display = 'none';
  resultDiv.style.display = 'block';
}

function toggleSupportForm() {
  const form = document.getElementById('supportForm');
  form.style.display = form.style.display === 'block' ? 'none' : 'block';
}

// Collapsible sections
const coll = document.getElementsByClassName("collapsible");
for (let i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    const content = this.nextElementSibling;
    content.style.display = content.style.display === "block" ? "none" : "block";
  });
}

// Back to top
window.onscroll = function() {
  const btn = document.getElementById("backToTop");
  btn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "block" : "none";
};
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>

</body>
</html>
